# fused-effects-control

This package enables interop between the [`fused-effects`](https://github.com/fused-effects/fused-effects) effect system and the [`monad-control`](https://hackage.haskell.org/package/monad-control-1.0.2.3) library. `monad-control` and its [`MonadBaseControl`](https://hackage.haskell.org/package/monad-control-1.0.2.3/docs/Control-Monad-Trans-Control.html#g:4) typeclass. This provides the ability to use `fused-effects` with libraries that use `monad-control` internally, such as [`streamly`](https://hackage.haskell.org/package/streamly-0.6.0).

Please be aware that injudicious use of the primitives provided by `MonadBaseControl` can lead to silent loss of a computation's effects. Unless external APIs tie you to the `monad-control` ecosystem, we highly recommend the use of the [`Resource` effect](http://hackage.haskell.org/package/fused-effects-0.3.0.0/docs/Control-Effect-Resource.html) for resource management, or the larger API provided by the [`unliftio`](http://hackage.haskell.org/package/unliftio) package. For more information on the potential pitfalls associated with `MonadBaseControl`, consult ["`monad-control` is tricky"](http://blog.ezyang.com/2012/01/monadbasecontrol-is-unsound/), ["A Tale of Two Brackets"](https://www.fpcomplete.com/blog/2017/06/tale-of-two-brackets), or @gelisam's [Twitter thread](https://twitter.com/haskell_cat/status/1119317660087484418).
